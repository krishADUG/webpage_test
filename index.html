<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Gliding No</title>
    <style>
        
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fce4ec; /* Soft pink background */
            overflow: hidden
        }

        #success-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fce4ec;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            text-align: center;
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .success-message {
            font-family: "Papyrus", "ITC Papyrus", "Comic Sans MS", cursive;
            font-size: 2rem;
            color: #880e4f;
            margin-top: 30px;
            padding: 0 20px;
            line-height: 1.5;
        }

        .image-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .image-wrapper {
            position: relative;
            display: inline-block;
        }

        .sparkle {
            position: absolute;
            width: 50px;
            height: 50px;
            background: #fd008b;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 0 15px #ff0095;
            animation: sparkleAnim 1.5s infinite;
        } 

        @keyframes sparkleAnim {
            0% {
                transform: scale(0.5);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.5);
                opacity: 0;
            }
            100% {
                transform: scale(0.5);
                opacity: 0.8;
            }
        }

        #mainImage {
            width: 250px;
            height: 250px;
            object-fit: cover; /* Adjust this to make the GIF bigger or smaller */ 
            border-radius: 75%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        #successImage {
            width: 250px;
            height: 250px;
            object-fit: cover; /* Adjust this to make the GIF bigger or smaller */ 
            border-radius: 75%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* The container for our waving letters */
        .waviy {
            position: relative;
            margin-bottom: 30px; /* Reduced margin to make room for extra lines */
            text-align: center;
            line-height: 1.2; /* Ensures lines aren't too far apart */
        }   

        /* Individual letter styling */
        .waviy span {
            font-family: "Papyrus", "ITC Papyrus", "Comic Sans MS", cursive;
            font-size: 3.0rem; /* Papyrus can run a bit small, so I bumped the size */
            font-weight: bold;
            position: relative;
            display: inline-block;
            color: #880e4f;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            animation: wave 2s infinite;
        /* This 'delay' is the secret‚Äîit makes the letters follow each other */
            animation-delay: calc(.1s * var(--i));
        }

        /* The actual "Wave" motion */
        @keyframes wave {
            0%, 40%, 100% {
                transform: translateY(0);
            }
            20% {
                transform: translateY(-20px); /* How high the letters jump */
            }
        }
        
        .small-text {
            font-size: 1.0rem !important; /* Adjust this to make it as small as you like */
            opacity: 0.8; /* Makes it look like a sub-caption */
        }

        h1 { color: #880e4f; margin-bottom: 50px; }

        .btn-container {
            position: static; 
            display: flex;
            gap: 20px;
        }

        button {
            padding: 15px 35px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 50px;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        #yesBtn {
            background-color: #4CAF50; 
            color: white; 
            margin-right: 150px;
            /* Use transitions for padding and font-size for the 'rearrange' effect */
            transition: padding 0.3s ease, font-size 0.3s ease; 
            z-index: 20;
            white-space: nowrap; /* Prevents the text from wrapping as it grows */
        }

        #noBtn {
            background-color: #f44336;
            color: white;
            position: absolute; /* Essential for movement */
            /* THE MAGIC LINE: This creates the glide effect */
            left: calc(50% + 60px);
            /* transition: all 0.3s ease-out; */
            transition: left 0.3s ease-out, top 0.3s ease-out;
            z-index: 10;
        }
    </style>
</head>


<body>

    
    <div id="success-page">
        <div class="image-wrapper">
            <div class="sparkle" style="top: -10%; left: -10%; animation-delay: 0s;"></div>
            <div class="sparkle" style="top: 10%; right: -10%; animation-delay: 0.5s;"></div>
            <div class="sparkle" style="bottom: 10%; left: -15%; animation-delay: 0.8s;"></div>
            <div class="sparkle" style="bottom: -5%; right: 0%; animation-delay: 1.2s;"></div>
            <div class="sparkle" style="top: 50%; left: -20%; animation-delay: 0.3s;"></div>    
        
            <img id="successImage" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWZ1bXhqbjI3NmM4b3VlMXc2MmwwcmE3M2theWJ4dDN5MnNvcTk2cSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/TKL99l61UBNnnQSx4o/giphy.gif" alt="Happy GIF">
        </div>   
        <div class="success-message">
            The contract has been signed!<br>
            End date extended to August 31st.<br>
            Happy Valentine's Day! ‚ù§Ô∏è
        </div>
    </div>
    
    <div class="image-container">
        <img id="mainImage" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzFrcXg5ZGpzNnRiMXgwYmprM296Mmh2d2UxaThraGhod3d6OGo2cCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/8QbwUh40Hl96yMgvOx/giphy.gif" alt="Question GIF">
    </div>
             
    <h1 class="waviy" id="question">Will you be my Valentine?</h1>

    <div class="btn-container">
        <button id="yesBtn" onclick="celebrate()">Yes</button>
        <button id="noBtn">No</button>
    </div>

    <script>
        let didClickNo = false;
        
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const questionText = document.getElementById('question');
        
        let mobileNoCount = 0; // Only for text prompts on touch
        let globalGrowCount = 0; // For button size on both PC and Mobile
        let noClickCount = 0;
        const maxNoClicks = 10;

        const sadImages = [
            "loki1.jpg", 
            "loki2.jpg", 
            "loki3.jpg"
        ];
        const phrasesNO = [
            "Maybe my Valentine?",
            "Are you heartless?",
            "Seriously last chance,<br>be my valentine.",
        ];
        const phrases = [
            "Will you be my Valentine?",
            "REALLY !?..<br>AGAIN will you be my Valentine?",
            "Okay !!<br>You are kidding me. <br> One more time !",
            "Please...<br>Be my valentine.",
            "Don't do this to me...<br>Be my Valentine.",
            "Final chance... !!!<br>Will you be my Valentine?",
            "Are you heartless?<br>Click Yes already! ü•∫",
            "I'm going to start crying...<br>REALLY! üò≠",
            "My lawyer will hear about this!<br>BE MINE! ‚öñÔ∏è",
            "You're doing this on purpose now...<br>RIGHT?? üò†",
            "I can do this all day.<br>CHOOSE YES! üò§"
        ];

        noBtn.addEventListener('click', () => {
            didClickNo = true;
            // This runs ONLY if they actually manage to click it (mostly PC)
    
            // 1. Change the GIF to the sad image
            const currentImg = sadImages[noClickCount] || sadImages[sadImages.length - 1];
            document.getElementById('mainImage').src = currentImg;

            // 2. Reset the growth counter and button styles
            globalGrowCount = 0;
            yesBtn.style.padding = "15px 35px";
            yesBtn.style.fontSize = "1.5rem";

            // 3. Reset the text to the original question
            const currentNoPhrase = phrasesNO[noClickCount] || phrasesNO[phrasesNO.length - 1];
            applyWavyTextSmall(currentNoPhrase);

            noClickCount++;
            
            if (noClickCount >= 3) {
                // Hides the button from the layout
                noBtn.style.display = "none"; 
        
                 // Optional: Center the Yes button since it's now alone
                yesBtn.style.marginRight = "0"; 
        
                 // Change the text to be even more demanding
                applyWavyTextSmall("No more hiding!<br>Say Yes! ‚ù§Ô∏è");
            } else {
                // Only reset position if the button still exists
                noBtn.style.left = "calc(50% + 60px)";
                noBtn.style.top = "auto"; 
            }    
        });
        
        const moveButton = (e) => {
            const isTouch = e.type === 'touchstart';
            didClickNo = true;
            if (isTouch) {
                e.preventDefault(); // Stop iPhone from clicking
                mobileNoCount++;
                // Update text prompts ONLY on mobile
                if (mobileNoCount <= maxNoClicks) {
                    const newText = phrases[mobileNoCount];
                    applyWavyText(newText);
                }
            }

            // Always grow the button, whether Mouse or Touch
            globalGrowCount++;
            const newPaddingVertical = 15 + (globalGrowCount * 5);
            const newPaddingHorizontal = 35 + (globalGrowCount * 10);
            const newFontSize = 1.5 + (globalGrowCount * 0.2); // starting at 1.5rem

            yesBtn.style.padding = `${newPaddingVertical}px ${newPaddingHorizontal}px`;
            yesBtn.style.fontSize = `${newFontSize}rem`;
            
            const buffer = 50;

            // 2. Calculate the available width and height
            // window.innerWidth is the total width
            // noBtn.clientWidth is the button's width
            const maxX = window.innerWidth - noBtn.clientWidth - buffer;
            const maxY = window.innerHeight - noBtn.clientHeight - buffer;

            // Generate random numbers within the safe range [buffer, max]
            const randomX = Math.floor(Math.random() * (maxX - buffer)) + buffer;
            const randomY = Math.floor(Math.random() * (maxY - buffer)) + buffer;

            // 4. Apply the new coordinates
            noBtn.style.left = `${randomX}px`;
            noBtn.style.top = `${randomY}px`;
        };
        
        function updatePage() {
            // 1. Update the text
            // We clear the wave and re-run the wave logic
            const newText = phrases[noCount] || phrases[phrases.length - 1];
            applyWavyText(newText);

            // 2. Make the Yes button bigger (1.2x, 1.4x, etc.)
            const scale = 1 + (noCount * 0.2); 
            yesBtn.style.transform = `scale(${scale})`;
    
           // Optional: make it harder to miss by increasing z-index
            yesBtn.style.zIndex = 20 + noCount;
        }

        // Function to handle the Papyrus wavy text
        function applyWavyText(str) { 
            questionText.innerHTML = ""; // Clear existing

            const lines = str.split("<br>");
            lines.forEach((line, lineIndex) => {
                line.split("").forEach((char, i) => {
                    const span = document.createElement('span');
                    span.innerText = char === " " ? "\u00A0" : char;
                    span.style.setProperty('--i', i + lineIndex * 10); // Offset index for new lines
                    questionText.appendChild(span);
                });
                
                if (lineIndex < lines.length - 1) {
                    questionText.appendChild(document.createElement('br'));
                }
            });
        }

        function applyWavyTextSmall(str) {
             if (!str) return;
            questionText.innerHTML = ""; 

            // Split by <br> to handle multiple lines
            const lines = str.split("<br>");

            lines.forEach((line, lineIndex) => {
            // Create a wrapper for the line to help with spacing
                const lineDiv = document.createElement('div');
                lineDiv.style.display = "block";

                line.split("").forEach((char, i) => {
                    const span = document.createElement('span');
                    span.innerText = char === " " ? "\u00A0" : char;
            
                    // Apply the wave delay
                    span.style.setProperty('--i', i + (lineIndex * 10));

                    // NEW: If it's the 2nd or 3rd line, make it smaller
                    if (lineIndex > 0) {
                        span.classList.add('small-text');
                    }

                    lineDiv.appendChild(span);
                });

                questionText.appendChild(lineDiv);
            });
        }   

        // Initial run for the first question
        applyWavyText(phrases[0]);

        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('touchstart', moveButton, {passive: false});

        function celebrate() {
            const messageElement = document.querySelector('#success-page .success-message');
            
            if (didClickNo) {
                messageElement.innerHTML = 
                    "Finally! I knew you'd give in eventually! ‚ù§Ô∏è<br>" +
                    "Your contract with my DAD has been<br>" +
                    "extended to August end.<br>" +
                    "Happy Valentine's Day!";
            } else {
                messageElement.innerHTML = 
                    "The contract has been signed!<br>" +
                    "End date extended to August end<br>" +
                    "Happy Valentine's Day! ‚ù§Ô∏è";
            }

            document.getElementById('success-page').style.display = 'flex';
        }

        const text = document.getElementById('question');
        const letters = text.innerText.split(""); // Splits "Hello" into ["H", "e", "l", "l", "o"]

        text.innerText = ""; // Clear the original text

        // Loop through each letter and wrap it in a span with an index (--i)
        letters.forEach((char, i) => {
            const span = document.createElement('span');
            span.innerText = char === " " ? "\u00A0" : char; // Keep spaces as spaces
            span.style.setProperty('--i', i); // This tells CSS which letter it is
            text.appendChild(span);
        });
    </script>
</body>
</html>